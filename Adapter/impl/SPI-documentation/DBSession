/* DBSession
   Represents a single user's session (e.g., a single HTTP request).
   METHODS:
      getConnectionPool()
      read(table, keys)
      insert(table, row)
      update(table, keys, row)
      write(table, row)
      delete(table, keys)
      createTransaction()
      setLockMode()
      close()
*/

/*  getConnectionPool() 
    IMMEDIATE
    RETURNS the DBConnectionPool from which this DBSession was created.
*/
  getConnectionPool();


/* buildInsertOperation(DBTableHandler tableHandler, 
                        Object row,
                        DBTransactionHandler transaction,
                        function(error, DBOperation) userCallback)
   IMMEDIATE
   Define an operation which when executed will insert a row.
   The userCallback is stored in the DBOperation, but will not be called 
   by this layer.
 
   RETURNS a DBOperation 
*/
  buildInsertOperation(tableHandler, row, transaction, callback);


/* buildWriteOperation(DBIndexHandler dbIndexHandler, 
                       Object row,
                       DBTransactionHandler transaction,
                       function(error, DBOperation) userCallback)
   IMMEDIATE
   Define an operation which when executed will update or insert
   The userCallback is stored in the DBOperation, but will not be called 
   by this layer.
 
   RETURNS a DBOperation 
*/
  buildWriteOperation(dbTableHandler, row, transaction, callback);


/* buildReadOperation(DBIndexHandler dbIndexHandler, 
                      Object keys,
                      DBTransactionHandler transaction,
                      function(error, DBOperation) userCallback)
   IMMEDIATE
   Define an operation which when executed will fetch a row.
   The userCallback is stored in the DBOperation, but will not be called 
   by this layer.

   RETURNS a DBOperation 
*/
  buildReadOperation(indexHandler, keys, transaction, callback);
                      

/* buildUpdateOperation(DBIndexHandler dbIndexHandler,
                        Object keys, 
                        Object values,
                        DBTransactionHandler transaction,
                        function(error, DBOperation) userCallback)
   IMMEDIATE
   Define an operation which when executed will access a row using the keys
   object and update the values provided in the values object.
   The userCallback is stored in the DBOperation, but will not be called 
   by this layer.
  
   RETURNS a DBOperation 
*/
  buildUpdateOperation(dbIndexHandler, keys, values, transaction, callback);


/* buildDeleteOperation(DBIndexHandler dbIndexHandler, 
                        Object keys,
                        DBTransactionHandler transaction,
                        function(error, DBOperation) userCallback)
   IMMEDIATE 
   Define an operation which when executed will delete a row
   The userCallback is stored in the DBOperation, but will not be called 
   by this layer.
 
   RETURNS a DBOperation 
*/  
  buildDeleteOperation(dbIndexHandler, keys, transaction, callback);


/* createTransaction()
   IMMEDIATE

   RETURNS a DBTransactionHandler
*/
  createTransaction();


/* void setLockMode(LockMode lockmode)
  IMMEDIATE

  Set the lock mode for read operations. This will take effect immediately
  and will remain in effect until this session is closed or this method
  is called again.
*/
  setLockMode(mode)


/* close(callback) 
   ASYNC
   
   Close DBSession and free all resources. 
   Callback is optional; if supplied, will receive (err).
*/
  close(callback);

