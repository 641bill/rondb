# Variable: mysqlx_compression_server_style
# Default : SINGLE,MULTIPLE,GROUP
# Scope   : GLOBAL
# Dynamic : Yes

SET @mysqlx_compression_server_style_sav= @@global.mysqlx_compression_server_style;

## Valid cases
SET GLOBAL mysqlx_compression_server_style="";
show variables like 'mysqlx_compression_server_style';

SET @@global.mysqlx_compression_server_style="SINGLE";
show variables like 'mysqlx_compression_server_style';
SET @@global.mysqlx_compression_server_style="MULTIPLE,GROUP";
show variables like 'mysqlx_compression_server_style';

## Invalid cases
--error ER_GLOBAL_VARIABLE
SET mysqlx_compression_server_style="SINGLE";
--error ER_GLOBAL_VARIABLE
SET @@local.mysqlx_compression_server_style="SINGLE";
--error ER_GLOBAL_VARIABLE
SET @@mysqlx_compression_server_style="SINGLE";
--error ER_GLOBAL_VARIABLE
SET @@session.mysqlx_compression_server_style="SINGLE";
--error ER_GLOBAL_VARIABLE
SET SESSION mysqlx_compression_server_style="SINGLE";

SET GLOBAL mysqlx_compression_server_style=1;
show variables like 'mysqlx_compression_server_style';

--error ER_WRONG_VALUE_FOR_VAR
SET GLOBAL mysqlx_compression_server_style=-848;

--error ER_WRONG_VALUE_FOR_VAR
SET GLOBAL mysqlx_compression_server_style=848;

--error ER_WRONG_VALUE_FOR_VAR
SET GLOBAL mysqlx_compression_server_style='%45*#in';
show variables like 'mysqlx_compression_server_style';

SET @@global.mysqlx_compression_server_style= @mysqlx_compression_server_style_sav;
