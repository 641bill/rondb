--source setup.inc

# Test inplace ALTER TABLE with force of using copying alter
# ie. ndb_use_copying_alter_table = 1
#
# - will try to perform the alter using inplace API
# - rejected since copying alter is being forced
#
# Query will fail since ndbcluster returns HA_ALTER_INPLACE_NOT_SUPPORTED
# when mysqld asks if it supports inplace ALTER TABLE. Since user requested
# inplace, the query will be rejected by mysqld.

set @@ndb_use_copying_alter_table = 1;
--error ER_ALTER_OPERATION_NOT_SUPPORTED_REASON
ALTER TABLE t1
  algorithm=inplace,
  add column c int;

--source cleanup.inc


