include/master-slave.inc
[connection master]
CREATE TABLE t1(a INT);
INSERT INTO t1 VALUES(1);
CALL mtr.add_suppression("Disk is full writing");
CALL mtr.add_suppression("Retry in 60 secs");
include/stop_slave_sql.inc
SET @@GLOBAL.DEBUG= 'd,simulate_io_thd_wait_for_disk_space';
INSERT INTO t1 VALUES(2);
include/wait_for_slave_param.inc [Slave_IO_State]
SET @@GLOBAL.DEBUG= '$debug_saved';
include/assert_grep.inc [Found the disk full error message on the slave]
include/start_slave_sql.inc
DROP TABLE t1;
include/rpl_end.inc
