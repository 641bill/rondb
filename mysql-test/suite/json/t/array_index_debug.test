--source include/have_debug.inc

--echo #
--echo # Bug#30292605: ASSERTION WHEN READING A HIDDEN ARRAY COLUMN
--echo #
CREATE TABLE t(j JSON, KEY k ((CAST(j->'$[*]' AS SIGNED ARRAY))));
INSERT INTO t VALUES ('[1,2,3]');
SET debug = '+d,show_hidden_columns';
SELECT * FROM t;
SET debug = '-d,show_hidden_columns';
DROP TABLE t;
