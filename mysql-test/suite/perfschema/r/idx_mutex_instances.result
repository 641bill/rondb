create database explain_test_db;
create table explain_test_db.explain_test_table (c int);
lock table explain_test_db.explain_test_table write;
# Connection con1
insert into explain_test_db.explain_test_table values ('1');
# Connection default
select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
limit 1
into @oib;
select NAME from performance_schema.mutex_instances
limit 1
into @name;
select LOCKED_BY_THREAD_ID from performance_schema.mutex_instances
where LOCKED_BY_THREAD_ID is not NULL
limit 1
into @lbtid;
############ Explain for Query ####################################
explain select NAME from performance_schema.mutex_instances
where OBJECT_INSTANCE_BEGIN = '0000000';
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	#	NULL	no matching row in const table
############ Explain for Query ####################################
explain select NAME from performance_schema.mutex_instances
where OBJECT_INSTANCE_BEGIN > 0 ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	ALL	PRIMARY	NULL	NULL	NULL	#	33.33	Using where
############ Explain for Query ####################################
explain select NAME from performance_schema.mutex_instances
where OBJECT_INSTANCE_BEGIN < 0 ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	ALL	PRIMARY	NULL	NULL	NULL	#	33.33	Using where
############ Explain for Query ####################################
explain select NAME from performance_schema.mutex_instances
where OBJECT_INSTANCE_BEGIN = @oib ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	const	PRIMARY	PRIMARY	8	const	#	100.00	NULL
############# Explain End #########################################
flush status;
select NAME from performance_schema.mutex_instances
where OBJECT_INSTANCE_BEGIN = @oib ;
NAME
#
show session status like "handler_read%";
Variable_name	Value
Handler_read_first	0
Handler_read_key	1
Handler_read_last	0
Handler_read_next	0
Handler_read_prev	0
Handler_read_rnd	0
Handler_read_rnd_next	0
############ Explain for Query ####################################
explain select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
where NAME = "impossible";
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	ref	NAME	NAME	386	const	#	100.00	NULL
############ Explain for Query ####################################
explain select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
where NAME > "foo" ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	ALL	NAME	NULL	NULL	NULL	#	33.33	Using where
############ Explain for Query ####################################
explain select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
where NAME < "bar" ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	ALL	NAME	NULL	NULL	NULL	#	33.33	Using where
############ Explain for Query ####################################
explain select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
where NAME = @name ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	ref	NAME	NAME	386	const	#	100.00	NULL
############# Explain End #########################################
flush status;
select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
where NAME = @name ;
OBJECT_INSTANCE_BEGIN
#
show session status like "handler_read%";
Variable_name	Value
Handler_read_first	0
Handler_read_key	1
Handler_read_last	0
Handler_read_next	1
Handler_read_prev	0
Handler_read_rnd	0
Handler_read_rnd_next	0
############ Explain for Query ####################################
explain select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
where LOCKED_BY_THREAD_ID = '9999';
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	ref	LOCKED_BY_THREAD_ID	LOCKED_BY_THREAD_ID	9	const	#	100.00	Using where
############ Explain for Query ####################################
explain select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
where LOCKED_BY_THREAD_ID > 1 ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	ALL	LOCKED_BY_THREAD_ID	NULL	NULL	NULL	#	33.33	Using where
############ Explain for Query ####################################
explain select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
where LOCKED_BY_THREAD_ID < 1 ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	ALL	LOCKED_BY_THREAD_ID	NULL	NULL	NULL	#	33.33	Using where
############ Explain for Query ####################################
explain select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
where LOCKED_BY_THREAD_ID = @lbtid ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
#	SIMPLE	mutex_instances	NULL	ref	LOCKED_BY_THREAD_ID	LOCKED_BY_THREAD_ID	9	const	#	100.00	Using where
############# Explain End #########################################
flush status;
select OBJECT_INSTANCE_BEGIN from performance_schema.mutex_instances
where LOCKED_BY_THREAD_ID = @lbtid ;
OBJECT_INSTANCE_BEGIN
#
show session status like "handler_read%";
Variable_name	Value
Handler_read_first	0
Handler_read_key	1
Handler_read_last	0
Handler_read_next	1
Handler_read_prev	0
Handler_read_rnd	0
Handler_read_rnd_next	0
unlock tables;
# connection con1
# connection default
drop table explain_test_db.explain_test_table;
drop database explain_test_db;
