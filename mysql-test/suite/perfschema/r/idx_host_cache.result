call mtr.add_suppression("192.0.2.4");
flush status;
flush hosts;
flush user_resources;
flush privileges;
select @@global.debug;
@@global.debug

select @@global.max_connect_errors;
@@global.max_connect_errors
100
select @@global.max_user_connections;
@@global.max_user_connections
0
select @@global.max_connections;
@@global.max_connections
151
select `User`, `Host` from mysql.`user` where `host` like '%\\%%';
User	Host
select `User`, `Host` from mysql.`user` where `user` like '192.%';
User	Host
select `User`, `Host` from mysql.`user` where `user` like '2001:%';
User	Host
select `User`, `Host` from mysql.`user` where `user` like 'santa.claus.%';
User	Host
SET @orig_sql_mode= @@sql_mode;
SET sql_mode= (SELECT REPLACE(@@sql_mode,'NO_AUTO_CREATE_USER',''));
GRANT SELECT ON test.* TO 'user4'@'santa.claus.ipv4.example.com';
SET sql_mode= @orig_sql_mode;
SET global debug= "+d,vio_peer_addr_fake_ipv4,getnameinfo_fake_ipv4,getaddrinfo_fake_good_ipv4";
SELECT "Con4 is alive" AS "";

Con4 is alive
SELECT current_user() AS "";

user4@santa.claus.ipv4.example.com
SET global debug= default;
############ Explain for Query ####################################
explain select * from performance_schema.host_cache
where IP < "1.1.1.1";
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	host_cache	NULL	ALL	PRIMARY	NULL	NULL	NULL	#	33.33	Using where
############ Explain for Query ####################################
explain select * from performance_schema.host_cache
where IP > "1.1.1.1";
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	host_cache	NULL	ALL	PRIMARY	NULL	NULL	NULL	#	33.33	Using where
############ Explain for Query ####################################
explain select * from performance_schema.host_cache
where IP = "impossible";
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	#	NULL	no matching row in const table
############ Explain for Query ####################################
explain select * from performance_schema.host_cache
where IP = "192.0.2.4";
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	host_cache	NULL	const	PRIMARY	PRIMARY	194	const	#	100.00	NULL
flush status;
select HOST
from performance_schema.host_cache
where IP = "192.0.2.4";
HOST
#
show session status like "handler_read%";
Variable_name	Value
Handler_read_first	0
Handler_read_key	1
Handler_read_last	0
Handler_read_next	0
Handler_read_prev	0
Handler_read_rnd	0
Handler_read_rnd_next	0
############ Explain for Query ####################################
explain select * from performance_schema.host_cache
where host = 'nohost';
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	host_cache	NULL	ref	HOST	HOST	768	const	#	100.00	NULL
############ Explain for Query ####################################
explain select * from performance_schema.host_cache
where host like "santa%";
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	host_cache	NULL	ALL	HOST	NULL	NULL	NULL	#	11.11	Using where
############ Explain for Query ####################################
explain select * from performance_schema.host_cache
where host = "santa.claus.ipv4.example.com";
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	host_cache	NULL	ref	HOST	HOST	768	const	#	100.00	NULL
############# Explain End #########################################
flush status;
select IP
from performance_schema.host_cache
where host = "santa.claus.ipv4.example.com";
IP
192.0.2.4
show session status like "handler_read%";
Variable_name	Value
Handler_read_first	0
Handler_read_key	1
Handler_read_last	0
Handler_read_next	1
Handler_read_prev	0
Handler_read_rnd	0
Handler_read_rnd_next	0
REVOKE SELECT ON test.* FROM 'user4'@'santa.claus.ipv4.example.com';
DROP USER 'user4'@'santa.claus.ipv4.example.com';
