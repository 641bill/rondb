# Tests for PERFORMANCE_SCHEMA

--source include/not_embedded.inc
--source include/have_perfschema.inc

# Test index on EVENT_NAME
--disable_warnings

--echo ############ Explain for Query ####################################
--replace_column 10 #
explain select EVENT_NAME
  from performance_schema.file_summary_by_event_name
  where EVENT_NAME = "impossible";

--echo ############ Explain for Query ####################################
--replace_column 10 #
explain select EVENT_NAME
  from performance_schema.file_summary_by_event_name
  where EVENT_NAME = "wait/io/file/sql/ERRMSG";

--enable_warnings
--echo ############# Explain End #########################################

truncate table performance_schema.file_summary_by_event_name;
flush status;

select EVENT_NAME, COUNT_STAR
  from performance_schema.file_summary_by_event_name
  where EVENT_NAME = "wait/io/file/sql/ERRMSG";

show session status like "handler_read%";

select EVENT_NAME, COUNT_STAR
  from performance_schema.file_summary_by_event_name
  where EVENT_NAME = "wait/io/file/sql/ERRMSG";

show session status like "handler_read%";
