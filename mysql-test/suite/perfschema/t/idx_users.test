# Tests for PERFORMANCE_SCHEMA

--source include/not_embedded.inc
--source include/have_perfschema.inc

create user foo@localhost;
grant ALL on *.* to foo@localhost;
connect(con, localhost, foo,,);

# Test index on HOST
--disable_warnings
--echo ############ Explain for Query ####################################
--replace_column 10 #
explain select * from performance_schema.users
  where USER = 'foo';

--echo ############ Explain for Query ####################################
--replace_column 10 #
explain select * from performance_schema.users
  where USER like "foo%";

--echo ############ Explain for Query ####################################
--replace_column 10 #
explain select * from performance_schema.users
  where USER = 'nouser';

--echo ############# Explain End #########################################
--enable_warnings

flush status;

--replace_column 3 #
select *
  from performance_schema.users
  where USER = 'foo';

show session status like "handler_read%";

--replace_column 3 #
select *
  from performance_schema.users
  where USER = 'foo';

show session status like "handler_read%";

# Cleanup
--connection default
drop user foo@localhost;
