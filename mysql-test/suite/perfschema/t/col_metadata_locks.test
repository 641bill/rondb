
# U+20AC = EURO sign, 3 bytes in UTF8: E2 82 AC

SET NAMES utf8mb4 COLLATE utf8mb4_0900_as_ci;

set @euro64 = repeat(_utf8 x'E282AC', 64);
set @euro37 = repeat(_utf8 x'E282AC', 37);

set @query = concat("drop database if exists ", @euro37);

select @query;

prepare stmt from @query;
--disable_warnings
execute stmt;
--enable_warnings
drop prepare stmt;

set @query = concat("create database ", @euro37);

select @query;

prepare stmt from @query;
execute stmt;
drop prepare stmt;

set @query = concat("create table ", @euro37, ".", @euro37,
                    "(a integer, bb integer, ", @euro64, " integer)");

select @query;

prepare stmt from @query;
execute stmt;
drop prepare stmt;

set @query = concat("insert into ", @euro37, ".", @euro37,
                    " values (1, 2, 3)");

select @query;

prepare stmt from @query;
execute stmt;
drop prepare stmt;

begin;

set @query = concat("select * from ", @euro37, ".", @euro37);

select @query;

prepare stmt from @query;
execute stmt;
drop prepare stmt;

select OBJECT_TYPE, OBJECT_SCHEMA, OBJECT_NAME, COLUMN_NAME,
  LOCK_TYPE, LOCK_DURATION, LOCK_STATUS
  from performance_schema.metadata_locks
  order by OBJECT_TYPE, OBJECT_SCHEMA, OBJECT_NAME, COLUMN_NAME,
  LOCK_TYPE, LOCK_DURATION, LOCK_STATUS;

commit;

set @query = concat("drop table ", @euro37, ".", @euro37);

select @query;

prepare stmt from @query;
execute stmt;
drop prepare stmt;

set @query = concat("drop schema ", @euro37);

select @query;

prepare stmt from @query;
execute stmt;
drop prepare stmt;

