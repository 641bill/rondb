#
# Bug#28556942: ADD USING SECONDARY ENGINE TO EXPLAIN
#
CREATE TABLE t1 (a INT) SECONDARY_ENGINE MOCK;
# Before table is loaded, the secondary engine should not be used.
ANALYZE TABLE t1;
Table	Op	Msg_type	Msg_text
test.t1	analyze	status	OK
EXPLAIN SELECT * FROM t1;
EXPLAIN FORMAT=JSON SELECT * FROM t1;
ALTER TABLE t1 SECONDARY_LOAD;
# After table is loaded, the secondary engine should be used.
ANALYZE TABLE t1;
Table	Op	Msg_type	Msg_text
test.t1	analyze	status	OK
EXPLAIN SELECT * FROM t1;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	NONE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	Using secondary engine MOCK. Use EXPLAIN FORMAT=TREE to show the plan.
Warnings:
Note	1003	/* select#1 */ select `test`.`t1`.`a` AS `a` from `test`.`t1`
EXPLAIN FORMAT=JSON SELECT * FROM t1;
DROP TABLE t1;
