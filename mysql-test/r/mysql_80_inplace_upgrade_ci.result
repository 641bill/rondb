###########################################################################
# Stop the default mtr server
###########################################################################
# Stop DB server which was created by MTR default
###########################################################################
# Setup the 8.0.11 data directory
###########################################################################
# Set different paths for --datadir
# Copy the remote tablespace & DB zip files from suite location to working location.
# Check that the file exists in the working folder.
# Unzip the zip file.
###########################################################################
# Test the --no-upgrade option with a 8.0.11 data directory
###########################################################################
# Search for the error message in the server error log.
Pattern "Server shutting down because upgrade is required, yet prohibited by the command line option \'--no-upgrade\'\." found
###########################################################################
# Test the --minimal-upgrade option with a 8.0.11 data directory
###########################################################################
# Search for the error message in the server error log.
Pattern "Column count of mysql\.user is wrong. Expected 51, found 49\. Created with MySQL 80011, now running 80015\." found
Pattern "Server upgrade is required, but skipped by command line option \'--minimal-upgrade\'\." found
###########################################################################
# Test the --no-upgrade option with a 8.0.11 data directory with upgraded
# data dictionary but skipped server upgrade
###########################################################################
# Search for the error message in the server error log.
Pattern "Server shutting down because upgrade is required, yet prohibited by the command line option \'--no-upgrade\'\." found
###########################################################################
# Complete the upgrade on a data directory that has an upgraded data
# dictionary but skipped server upgrade
###########################################################################
# There should be no errors
Pattern "\[ERROR\]" not found
###########################################################################
# Cleanup
###########################################################################
###########################################################################
# Setup 8.0.11 data directory
###########################################################################
# Copy the remote tablespace & DB zip files from suite location to working location.
# Check that the file exists in the working folder.
# Unzip the zip file.
###########################################################################
# Test complete upgrade on 8.0.11 data directory
###########################################################################
# There should be no errors
Pattern "\[ERROR\]" not found
# Stop DB server
###########################################################################
# Cleanup
###########################################################################
# restart:
